<!DOCTYPE html>
<html lang="en">
    <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

      <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='universalLayout.css') }}">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
      <title>Lusabuy | {{ title }}</title>

        {% block head %}
        {% endblock head %}

        <style>
            /* Optional CSS to style the active dropdown */
            .nav-item.dropdown .nav-link {
                transition: color 0.3s ease; /* Smooth color transition */
            }

            .nav-item.dropdown.active-dropdown .nav-link {
                color: #007bff; /* Example: Change color to blue when active */
            }

            .nav-item.dropdown.active-dropdown {
                background-color: #f0f0f0; /* Light grey background */
                /* Add any other styles you want */
            }
            .dropdown-menu.show {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }

            .navbar-nav .dropdown-menu {
                position: absolute;  /* Ensures correct positioning */
                z-index: 1000;        /* Ensure it's above other content */
                float: none;          /* Remove float */
                min-width: 200px;   /* Minimum width for the dropdown */
                padding: 0.5rem 0;   /* Padding for better spacing */
                margin: 0;            /* Reset margin */
                font-size: 1rem;      /* Font size */
                color: #212529;       /* Text color */
                text-align: left;      /* Text alignment */
                list-style: none;      /* Remove list styles */
                background-color: #fff; /* White background */
                background-clip: padding-box;
                border: 1px solid rgba(0, 0, 0, 0.15); /* Border */
                border-radius: 0.25rem; /* Rounded corners */
            }


            .navbar-nav .dropdown-menu .dropdown-item {
                padding: 0.25rem 1.5rem;
                clear: both;
                font-weight: 400;
                color: #212529;
                text-align: inherit;
                white-space: nowrap;
                background-color: transparent;
                border: 0;
                transition: background-color 0.15s ease; /* Smooth background transition */
            }

            .navbar-nav .dropdown-menu .dropdown-item:hover,
            .navbar-nav .dropdown-menu .dropdown-item:focus {
                color: #16181b;
                background-color: #f8f9fa;
            }

            /* Search Box CSS (Corrected) */
            .box {
                height: 30px;
                display: flex;
                cursor: pointer;
                background: #fff;
                border-radius: 30px;
                align-items: center;
                overflow: visible; /* changed to visible */
                transition: border-color 0.3s ease; /* Smooth border color transition */
                position: relative;   /* Required for absolute positioning of results */
            }

            .box:hover {
                border: 1px solid #ccc; /* Add a border on hover */
            }

            .box:hover input {
                width: 200px; /* Define a final width */
            }

            .box input {
                width: 0;
                outline: none;
                border: none;
                font-weight: 500;
                transition: width 0.8s;  /* Transition on width */
                background: transparent;
            }

            .box a .fas {
                color: black;  /* Make the search icon black */
                font-size: 18px;
            }

           /* Style for search results */
            #search-results {
                position: absolute; /* Position below the search box */
                top: 100%;           /* Position right below the box */
                left: 0;
                /*width: 100%;*/   /* Take the width of parent element*/
                width: auto;        /* Adjust width based on content */
                min-width: 200px;   /* Minimum width for the dropdown */
                max-width: 250px;   /* Maximum width for the dropdown */ /* Add this line */
                background-color: black; /* Black background */
                border: 1px solid #ccc;
                border-radius: 5px;
                padding: 5px;
                z-index: 10; /* Ensure it's above other elements */
                display: none; /* Initially hide */
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Add a subtle shadow */
            }

            #search-results ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            #search-results li {
                padding: 5px;
                margin-bottom: 5px; /* Add spacing between results */
                border: 1px solid #555; /* Darker border */
                border-radius: 3px;
                transition: background-color 0.2s ease; /* Smooth background transition on the LI */
            }

            #search-results li:hover {
                background-color: #333; /* Change background color on hover */
            }

            #search-results li a {
                display: block;
                color: white; /* Changed to white for black background */
                text-decoration: none;
                transition: color 0.2s ease; /* Smooth color transition */
                padding: 5px; /* Add padding inside the box */
            }

            #search-results li a:hover {
                color: #ddd; /* Slightly lighter text color on hover */
            }

            #search-results h3 {
                color: white; /* Changed to white for black background */
                font-size: 1em;
                margin-bottom: 5px;
            }


        </style>

    </head>
    <body>
      <nav class="sticky-top navbar navbar-expand-lg border-bottom pb-0 pt-0 bg-white">
        <a href="{{ url_for('lusaPrint.home') }}" class="navbar-brand companyName">
          <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Company Logo" class="logo"/>
        </a>
        <button class="navbar-toggler pe-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse two-steps-nav" id="navbarNav">
          <ul class="navbar-nav ms-auto">

              <div class="box p-1">
                <input type="text" placeholder="Search..." id="search-input">
                <a href="#">
                    <i class="fas fa-search"></i>
                </a>
                  <div id="search-results"></div>
              </div>
                <li class="nav-item offWhenScreen">
                    <a href="https://ko-fi.com/thelittlejournal" class="fontForDonate text-decoration-none text-reset">
                        <button type="button" class="btn btn-outline-dark top-nav-sm m-0 me-2 ms-2 pt-1 pb-1 ps-2 pe-2">
                                Donate
                        </button>
                    </a>
                </li>
                <li class="nav-item offWhenScreen">
                    <a class="nav-link" href="#">
                        <img src="https://static.thenounproject.com/png/4853735-512.png" class="contactImg">
                    </a>
                </li>
            <!--    <li class="nav-item dropdown">-->
            <!--            <a class="nav-link dropdown-toggle" href="#" id="translateDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
            <!--                Translate-->
            <!--            </a>-->
            <!--            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="translateDropdown">-->
            <!--                <li><a class="dropdown-item" href="#">English</a></li>-->
            <!--                <li><a class="dropdown-item" href="#">Spanish</a></li>-->
            <!--                <li><a class="dropdown-item" href="#">French</a></li>-->
            <!--            </ul>-->
            <!--    </li>-->
          </ul>
          <ul class="navbar-nav justTheBelowOne ms-auto">
            <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="aboutDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
                <ul class="dropdown-menu" aria-labelledby="aboutDropdown">
                  <li><a class="dropdown-item" href="#">The Little Journal</a></li>
                  <li><a class="dropdown-item" href="#">Masthead</a></li>
                  <li><a class="dropdown-item" href="#">Press</a></li>
                  <li><a class="dropdown-item" href="#">Contributors</a></li>
                </ul>
              </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" id="categoriesDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Categories</a>
              <ul class="dropdown-menu" aria-labelledby="categoriesDropdown">
                <li><a class="dropdown-item" href=#>Poems</a></li>
                <li><a class="dropdown-item" href=#>Personal Essays</a></li>
                <li><a class="dropdown-item" href=#>Short Stories</a></li>
                <li><a class="dropdown-item" href=#>Art</a></li>
                <li><a class="dropdown-item" href=#>Photographs</a></li>
                <li><a class="dropdown-item" href="#">Little Stories</a></li>
                <li class="" id="dropEnd">
                  <a class="dropdown-item dropdown-toggle" href="#" id="interviewsDropdown" role="button" aria-haspopup="true" aria-expanded="false">10 Questions</a>
                  <ul class="dropdown-menu" aria-labelledby="interviewsDropdown">
                    <li><a class="dropdown-item" href="#">{{ interview1.interviewedTo }}</a></li>
                    <li><a class="dropdown-item" href="#">{{ interview2.interviewedTo }}</a></li>
                    <li><a class="dropdown-item" href="#">Archive</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" id="IssuesDropdown" role="button" aria-haspopup="true" data-bs-toggle="dropdown" aria-expanded="false">Journal Issues</a>
              <ul class="dropdown-menu" aria-labelledby="IssuesDropdown">
                <li><a class="dropdown-item" href="#">{{ postIssues1.title }}</a></li>
                <li><a class="dropdown-item" href="#">{{ postIssues2.title }}</a></li>
                <li><a class="dropdown-item" href="#">Archive</a></li>
              </ul>
            </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="SubmittionDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Submissions</a>
                <ul class="dropdown-menu" aria-labelledby="SubmittionDropdown">
                    <li><a class="dropdown-item" href="#">Guidelines</a></li>
                    <li><a class="dropdown-item" href="#">Process</a></li>
                </ul>
              </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="moreDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Events & Services</a>
              <ul class="dropdown-menu" id="add_dropdown_menu_end" aria-labelledby="moreDropdown">
                <li><a class="dropdown-item" href="#">Editing & Voiceover</a></li>
                <li><a class="dropdown-item" href=#>Products</a></li>
                <li><a class="dropdown-item" href="#">Events & Announcements</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>

        <div class="container my-5">

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}

                {% endif %}

            {% endwith %}

            <!-- Search Modal -->
            <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
                <div id="pink-overlay">
                    <span class="close-button" onclick="hideOverlay()">×</span>
                </div>
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content search-popup">
                        <div class="modal-body">
                            <input type="text" class="form-control" id="search-input" placeholder="Search...">
                            <div id="search-results" class="search-results"></div>
                        </div>
                    </div>
                </div>
            </div>

            {% block content %}

            {% endblock content %}
        </div>
          <footer class="bg-light py-5 border-top someLessPaddingMob">
            <div class="d-flex justify-content-between someAlignmentRequire">
                <p class="fontfooter1 mb-0 d-flex justify-content-center">Copyright © 2019 The Little Journal of Northeast India</p>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center someAlignmentRequireTopPart">
                        <div class="d-flex align-items-center onWhenScreen">
                            <a class="nav-link pe-2 ps-0 ms-0" href="#">
                                <img src="https://static.thenounproject.com/png/4853735-512.png" class="contactImg pe-0 me-0">
                            </a>
                            <a href="https://ko-fi.com/thelittlejournal" class="fontForDonate text-decoration-none text-reset">
                                <button type="button" class="btn btn-outline-dark top-nav-sm m-0 me-2 ms-2 pt-1 pb-1 ps-2 pe-2">
                                        Donate
                                </button>
                            </a>
                        </div>
                        <button type="button" class="subForMob btn btn-outline-dark top-nav-sm p-1 me-3" data-bs-toggle="modal" data-bs-target="#subscribeModal">
                            Subscribe
                        </button>
                    </div>
                    <div class="d-flex align-items-center social-links">
                        <a href="https://www.facebook.com/thelittlejournalofneindia" class="fa-brands fa-facebook me-2 mb-0 pb-0 text-decoration-none text-dark"></a>
                        <a href="https://www.instagram.com/thelittlejournal.neindia/" class="fa-brands fa-instagram me-2 text-decoration-none text-dark"></a>
                        <a href="https://x.com/TNeindia" class="fa-brands fa-twitter me-2 text-decoration-none text-dark"></a>
                        <a href="https://www.linkedin.com/company/the-little-journal-of-northeast-india/about/" class="fa-brands fa-linkedin text-decoration-none text-dark"></a>
                    </div>
                </div>
            </div>
            <div class="modal fade shadow" id="subscribeModal" tabindex="-1" aria-labelledby="subscribeModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class=" d-flex justify-content-between ms-3 me-3 mt-3 mb-0 pb-0">
                            <p class=" mb-0 " id="subscribeModalLabel"> Dear reader,</p>
                            <button type="button" class="btn-close" style="height:.5em; width:.5em;" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body mt-0 pt-0">
                            <img src="{{ url_for('static', filename='img/subscribe.png') }}" class="img-fluid mb-3">
                            <p>Sign up for the <i>TLJNE</i> newsletter to receive the latest news on issue releases, calls for submissions, workshops, interviews, and lots more.</p>
                            <form action="https://api.web3forms.com/submit" method="POST">
                                <input type="hidden" name="access_key" value="7d126f7c-ce83-46a5-9779-991185767211">
                                <div class="mb-3">
                                    <p>Unsubscribe anytime by clicking the button in the email footer.</p>
                                    {{ subForm.email(class="form-control mb-3", placeholder="name@example.com") }}
                                    {{ subForm.name(class="form-control", placeholder="Name") }}
                                </div>
                                <div class="d-flex justify-content-center">
                                    {{ subForm.submit(class="btn btn-outline-dark") }}
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
      </footer>


      <!-- Bootstrap JS and dependencies -->
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

      <script>
          function contactAndDonate(){
              let onWhenScreenStore = document.querySelectorAll('.onWhenScreen');
              let offWhenScreenStore = document.querySelectorAll('.offWhenScreen');
              let dropAfter415 = document.querySelectorAll('.dropdown-menu');

              if (window.innerWidth <= 992) { // Small screen
                  document.querySelector('.someAlignmentRequire').classList.add("flex-column");
                  document.querySelector('.someAlignmentRequire').classList.add("flex-column-reverse");
                  document.querySelector('.someAlignmentRequire').classList.remove("align-items-center");
                  document.querySelector('.someAlignmentRequire').classList.remove("ms-5");
                  document.querySelector('.someAlignmentRequire').classList.remove("me-5");
                  document.querySelector('.someAlignmentRequire').classList.add("ms-3");
                  document.querySelector('.someAlignmentRequire').classList.add("me-3");
                  document.querySelector('.someAlignmentRequireTopPart').classList.add("pb-2");
                  document.querySelector('.someLessPaddingMob').classList.add("pt-2");
                  document.querySelector('.someLessPaddingMob').classList.add("pb-3");
                  document.querySelector('.subForMob').classList.add("pt-0");
                  document.querySelector('.subForMob').classList.add("pb-0");

                dropAfter415.forEach((ele)=>{
                    ele.classList.add("dropdown-menu-end");
                });
                document.querySelector('#dropEnd').classList.remove('dropend');
                // Show only the first item
                onWhenScreenStore.forEach((ele)=>{
                    ele.classList.remove("d-none");
                });
                offWhenScreenStore.forEach((ele)=>{
                    ele.classList.add("d-none");
                });
              }
              else
              {
                  document.querySelector('.someAlignmentRequire').classList.remove("flex-column");
                  document.querySelector('.someAlignmentRequire').classList.remove("flex-column-reverse");
                  document.querySelector('.someAlignmentRequire').classList.add("align-items-center");
                  document.querySelector('.someAlignmentRequire').classList.add("ms-5");
                  document.querySelector('.someAlignmentRequire').classList.add("me-5");
                  document.querySelector('.someAlignmentRequire').classList.remove("ms-3");
                  document.querySelector('.someAlignmentRequire').classList.remove("me-3");
                  document.querySelector('.someAlignmentRequireTopPart').classList.remove("pb-2");
                  document.querySelector('.someLessPaddingMob').classList.remove("pt-2");
                  document.querySelector('.someLessPaddingMob').classList.remove("pb-3");
                  document.querySelector('.subForMob').classList.remove("pt-0");
                  document.querySelector('.subForMob').classList.remove("pb-0");

                dropAfter415.forEach((ele)=>{
                    ele.classList.remove("dropdown-menu-end");
                });
                document.querySelector('#dropEnd').classList.add('dropend');
                document.querySelector('#add_dropdown_menu_end').classList.add('dropdown-menu-end');
                // Show only the first item
                onWhenScreenStore.forEach((ele)=>{
                    ele.classList.add("d-none");
                });
                offWhenScreenStore.forEach((ele)=>{
                    ele.classList.remove("d-none");
                });
              }
          }

        contactAndDonate();
        window.addEventListener('resize', contactAndDonate);



        document.addEventListener('DOMContentLoaded', function () {

        // Existing code for general dropdown handling...
         var dropdownSubmenus = document.querySelectorAll('.dropend');

          dropdownSubmenus.forEach(function (submenu) {
            submenu.querySelector('.dropdown-toggle').addEventListener('click', function (e) {
              e.stopPropagation();
              var submenuDropdownMenu = submenu.querySelector('.dropdown-menu');
              if (submenuDropdownMenu.classList.contains('show')) {
                submenuDropdownMenu.classList.remove('show');
              } else {
                document.querySelectorAll('.dropend .dropdown-menu').forEach(function (el) {
                  el.classList.remove('show');
                });
                submenuDropdownMenu.classList.add('show');
              }
            });
          });

          document.addEventListener('click', function () {
            document.querySelectorAll('.dropend .dropdown-menu').forEach(function (el) {
              el.classList.remove('show');
            });
          });


        // NEW CODE START
        const interviewsDropdownLink = document.getElementById('interviewsDropdown');

        interviewsDropdownLink.addEventListener('click', function (event) {
            if (window.innerWidth <= 992) {
                event.preventDefault(); // Prevent default link behavior
                event.stopPropagation(); // Stop event from bubbling to parent

                const interviewsDropdownMenu = this.nextElementSibling; // Get the dropdown menu
                interviewsDropdownMenu.classList.toggle('show'); // Toggle the 'show' class
            }
        });
        // NEW CODE END

    });
        window.onload = function() {
            if (!sessionStorage.getItem('modalShown')) {
                var myModal = new bootstrap.Modal(document.getElementById('subscribeModal'), {
                    keyboard: false
                });
                myModal.show();

                sessionStorage.setItem('modalShown', 'true');
            }
        };

        function showOverlay() {
          document.getElementById("pink-overlay").style.display = "block";
        }

        function hideOverlay() {
          document.getElementById("pink-overlay").style.display = "none";
        }

        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('search-input');
            const searchResultsContainer = document.getElementById('search-results');

            searchInput.addEventListener('input', function() {
                const searchTerm = searchInput.value.toLowerCase();
                searchResultsContainer.innerHTML = ''; // Clear previous results
                searchResultsContainer.style.display = 'none'; // Hide the results container

                if (searchTerm.length < 3) { // Don't search for very short terms
                    return;
                }

                // Get all anchor elements (links)
                const allLinks = document.body.querySelectorAll('a');

                const linkResults = [];

                allLinks.forEach(link => {
                    const linkText = link.innerText.toLowerCase();
                    if (linkText.includes(searchTerm)) {
                        linkResults.push({
                            href: link.href,
                            text: link.innerText
                        });
                    }
                });

                if (linkResults.length > 0) {
                    searchResultsContainer.style.display = 'block'; // Show the results container
                    const resultsList = document.createElement('ul');
                    linkResults.forEach(result => {
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = result.href;
                        link.textContent = result.text;
                        listItem.appendChild(link);
                        resultsList.appendChild(listItem);
                    });

                    searchResultsContainer.appendChild(document.createElement('h3')).textContent = `Found ${linkResults.length} matches:`;
                    searchResultsContainer.appendChild(resultsList);
                } else {
                    searchResultsContainer.style.display = 'block'; // Show the results container
                    searchResultsContainer.appendChild(document.createElement('p')).textContent = 'No results found.';
                }
            });
        });

        // Add the script to change the nav-item style on dropdown open
        document.addEventListener('DOMContentLoaded', function() {
            const dropdownElements = document.querySelectorAll('.nav-item.dropdown'); // Select all dropdown nav-items

            dropdownElements.forEach(function(dropdown) {
                dropdown.addEventListener('shown.bs.dropdown', function () {
                    // This function is called *after* the dropdown is shown.
                    this.classList.add('active-dropdown');  // Add a class to the nav-item
                    //this.style.backgroundColor = '#f0f0f0'; // Change background color, for example
                });

                dropdown.addEventListener('hidden.bs.dropdown', function () {
                    // This function is called *after* the dropdown is hidden.
                    this.classList.remove('active-dropdown'); // Remove the added class
                    //this.style.backgroundColor = '';       // Reset the background color
                });
            });
        });



        {% block script %}
        {% endblock script %}
      </script>
    </body>
</html>